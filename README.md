# Meme API

Meme API предоставляет функционал для загрузки, получения, обновления и удаления мемов.

### Установка Docker и Docker Compose

1. Установите [Docker](https://docs.docker.com/get-docker/).
2. Установите [Docker Compose](https://docs.docker.com/compose/install/).

### Запуск проекта

Для запуска проекта выполните следующие шаги:

1. Клонируйте репозиторий:

    ```sh
    git clone https://github.com/amir-garaev/FastAPI-Minio.git
    ```

2. Перейдите в директорию проекта:

    ```sh
    cd FastAPI-Minio
    ```
3. Перед запуском проекта отредактируйте файл `.env` и укажите свои данные, такие как имя базы данных, пароль и при необходимости порты. Пример файла `.env`:
```
MINIO_URL = 'http://172.17.0.1:9000'
MINIO_BUCKET_NAME = 'meme'
DATABASE_URL = 'postgresql://postgres:123456@db:5435/meme'
MINIO_ROOT_USER = 'minioadmin'
MINIO_ROOT_PASSWORD = 'minioadmin'
```

4. Создайте и запустите контейнеры:

    ```sh
    docker compose up --build
    ```
5. Сайт будет доступен по адресу `http://0.0.0.0:9999` 
### Структура проекта

Проект состоит из следующих сервисов:

1. **Публичный API**: Предоставляет доступ к публичным данным без необходимости предоставления админского токена. Включает в себя все GET запросы, такие как получение списка мемов и получение информации о конкретном меме.
2. **Приватный API**: Для обеспечения безопасности и управления контентом, некоторые эндпоинты требуют предоставления админского токена. POST,PUT,DELETE Требуется админский токен. По стандарту, админский токен имеет значение `admin meme`.
3. **Сервис СУБД**: Использует PostgreSQL для хранения данных.
4. **Сервис S3-storage**: Использует Minio для хранения мемов.

### Масштабируемость
Проект разработан с учетом масштабируемости, что позволяет легко добавлять новые эндпоинты и функциональность. Если вы хотите добавить новые эндпоинты, выполните следующие шаги:
1. Перейдите в директорию `app_meme/routers`.
2. Создайте новый файл для вашего эндпоинта, например, `new_meme.py`.
3. Определите в этом файле необходимые маршруты и функции.
4. Подключите новый роутер к главному приложению в файле `main.py`:
```python
from app_meme.routers import new_meme

app.include_router(new_meme.router, prefix="/new_memes", tags=["new_memes"])
  ```

### Документация
Доступна по ссылке:`http://0.0.0.0:9999/docs`
 
### Тесты
```sh
pytest test.py
```
